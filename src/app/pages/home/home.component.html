<div dir="rtl" class="p-8 bg-slate-50 min-h-screen text-gray-800">

  <!-- ðŸ”µ Ø±Ø¯ÛŒÙ Ø§ÙˆÙ„: Ù…Ø±ÙˆØ± Ø§Ù…Ø±ÙˆØ² + ØªÙ‚ÙˆÛŒÙ… -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">

    <!-- Ù…Ø±ÙˆØ± Ø§Ù…Ø±ÙˆØ² -->
    <div class="border border-blue-300 bg-white rounded-xl p-6 shadow-sm">
      <h2 class="text-xl font-bold text-blue-700 mb-4">Ù…Ø±ÙˆØ± Ø§Ù…Ø±ÙˆØ²</h2>
      <ul class="list-disc pr-5 space-y-2">
        <li *ngFor="let item of todayOverview">{{ item }}</li>
      </ul>
    </div>

    <!-- ØªÙ‚ÙˆÛŒÙ… Ø´Ù…Ø³ÛŒ -->
    <div class="bg-white rounded-2xl shadow-md p-6 border border-blue-200">

      <div class="flex justify-between mb-6">
        <div class="flex gap-2">
          <button class="cal-nav-btn" (click)="prevYear()">Â« Ø³Ø§Ù„ Ù‚Ø¨Ù„</button>
          <button class="cal-nav-btn" (click)="prevMonth()">â€¹ Ù…Ø§Ù‡ Ù‚Ø¨Ù„</button>
        </div>

        <div class="text-2xl font-extrabold text-blue-700">
          {{ monthName }} <span class="text-blue-500">{{ currentYear }}</span>
        </div>

        <div class="flex gap-2">
          <button class="cal-nav-btn" (click)="nextMonth()">Ù…Ø§Ù‡ Ø¨Ø¹Ø¯ â€º</button>
          <button class="cal-nav-btn" (click)="nextYear()">Ø³Ø§Ù„ Ø¨Ø¹Ø¯ Â»</button>
        </div>
      </div>

      <div class="grid grid-cols-7 text-center text-gray-600 font-semibold mb-3">
        <div *ngFor="let d of daysOfWeek">{{ d }}</div>
      </div>

      <div class="grid grid-cols-7 gap-y-2 text-center">
        <div
          *ngFor="let day of calendarGrid"
          class="cal-day"
          [ngClass]="{ 'cal-today': isToday(day), 'cal-empty': day === null }"
        >
          {{ day ?? '' }}
        </div>
      </div>

    </div>
  </div>

  <!-- ðŸ”µ Ø§Ù…ØªØ­Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒØ±Ùˆ -->
  <div class="border border-blue-300 bg-white rounded-3xl p-6 mb-6 shadow-sm">
    <h2 class="text-xl font-bold text-blue-700 mb-4 text-center">Ø§Ù…ØªØ­Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒØ±Ùˆ</h2>

    <ng-container *ngIf="upcomingExams.length; else noExams">

      <table class="w-full text-center border-collapse shadow-sm rounded-xl overflow-hidden">
        <thead class="bg-blue-100 text-blue-900 font-semibold">
          <tr>
            <th class="p-2 border">Ø´Ù…Ø§Ø±Ù‡</th>
            <th class="p-2 border">Ù†Ø§Ù… Ø§Ù…ØªØ­Ø§Ù†</th>
            <th class="p-2 border">ØªØ§Ø±ÛŒØ®</th>
            <th class="p-2 border">Ø´Ø±ÙˆØ¹</th>
            <th class="p-2 border">Ù¾Ø§ÛŒØ§Ù†</th>
            <th class="p-2 border">Ø³Ø§Ù„Ù†</th>
          </tr>
        </thead>

        <tbody>
          <tr
            *ngFor="let item of visibleExams; let i = index"
            class="transition rounded-xl"
            [ngClass]="[
              getWeekCssClass(item.weekColor),
              isExamPast(item) ? 'exam-past' : ''
            ]"
          >
            <td class="border p-2">{{ i + 1 }}</td>
            <td class="border p-2">{{ item.name }}</td>
            <td class="border p-2">{{ item.date }}</td>
            <td class="border p-2">{{ item.startTime }}</td>
            <td class="border p-2">{{ item.endTime }}</td>
            <td class="border p-2">{{ item.roomName }}</td>
          </tr>
        </tbody>
      </table>

      <div class="flex justify-between items-center mt-3">
        <span class="text-sm text-gray-500">
          {{ visibleExams.length }} Ø§Ø² {{ upcomingExams.length }} Ø§Ù…ØªØ­Ø§Ù† Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª
        </span>

        <button
          *ngIf="upcomingExams.length > maxVisibleExams"
          (click)="toggleShowMore()"
          pButton
          class="p-button-outlined p-button-info"
          [label]="showAllExams ? 'Ù†Ù…Ø§ÛŒØ´ Ú©Ù…ØªØ±' : 'Ù†Ù…Ø§ÛŒØ´ Ø¨ÛŒØ´ØªØ±'"
        ></button>
      </div>

    </ng-container>

    <ng-template #noExams>
      <p class="text-center text-gray-500">Ù‡ÛŒÚ† Ø§Ù…ØªØ­Ø§Ù†ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
    </ng-template>
  </div>

  <!-- ðŸ”µ Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù† -->
  <div class="border border-blue-300 bg-white rounded-3xl p-6 mb-6 shadow-sm">
    <h2 class="text-xl font-bold text-blue-700 mb-4">Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†</h2>

    <div class="flex flex-wrap gap-4">
      <div
        *ngFor="let course of myCourses"
        class="border border-blue-400 bg-blue-50 text-blue-700 px-6 py-2 rounded-xl cursor-pointer hover:bg-blue-100 transition"
        [routerLink]="['/courses', course.id]"
      >
        {{ course.courseName }}
      </div>
    </div>
  </div>

</div>
